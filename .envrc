# Auto-create and activate venv
if [ ! -d .venv ]; then
    echo "Creating virtualenv..."
    python3 -m venv .venv
fi
source .venv/bin/activate

# Install deps if needed
if [ ! -f .venv/.installed ] || [ pyproject.toml -nt .venv/.installed ]; then
    echo "Installing dependencies..."
    pip install -q -e ".[dev]"
    touch .venv/.installed
fi
